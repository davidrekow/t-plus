(function () {/*
 David Rekow 2012-2015
*/
var f={g:/\{\{\s*?([@!>#]?)(.+?)\s*?\}\}(([\s\S]*?)(\{\{\s*?:\2\s*?\}\}([\s\S]*?))?)\{\{\s*?\/\1?\2\s*?\}\}/g,c:/\{\{\s*?\+\s*?([^\s]+?)\s*?\}\}/g,extend:/^\s*?\{\{\s*?\^([\w\W]+?)\s*?\}\}/,macro:/\{\{\s*?(([^\s\(]+))\(([^\)]*?)\)\s*?\}\}(?:([\s\S.]*)\{\{\s*?\/\s*?(?:\1|\2)\}\})?/g,d:/\{\{\s*?(#(.+?))\s*?\}\}([\s\S]*?)\{\{\s*?\/\1?\2\s*?\}\}/g,b:/\{\{\s*?([=%])\s*?(.+?)\s*?\}\}/g,k:/^('|")(?:.*?)\1$/,length:/\.length$/,l:/^\s+/,m:/\s+$/,f:/'/g,j:/"/g,i:/</g,h:/>/g};
function g(a,b,c){var e=f.extend.exec(a.t),d=a.t.replace(f.d,function(a,c,d,q){b[d]||(b[d]=q);return e?a:b[d]});if(e)return m.get(e[1],function(d){a.t=d.t;return g(a,b,c)});a.t=d;return f.d.test(a.t)?g(a,b,c):c(a)}function n(a,b,c){for(var e=[],d;d=f.c.exec(a.t);)e.push(d[1]);if(e.length)return m.get(e,function(d){a.t=a.t.replace(f.c,function(a,b){var c=d[b];return c&&!f.extend.test(c.t)?c.t:""});return n(a,b,c)});a.a=a.t;return m.render(a,b,c)}function m(a){this.e=this.t=a;this.a=null}m.macros={};
m.templates={};m.get=function(a,b){var c,e;Array.isArray(a)?(c={},e=a.length,a.forEach(function(a){m.get(a,function(h){c[a]=h;0===--e&&b(c)})})):b(m.templates[a])};m.macro=function(a,b){b&&(m.macros[a]=b);return m.macros[a]};m.put=function(a,b){m.templates[a]=b instanceof m?b:new m(b)};m.render=function(a,b,c){var e;if(!a.t)return c("");a.e=a.t;if(!a.a)return g(a,{},function(a){return n(a,b,c)});a.t=a.a;e=b.parse(a.t);a.t=a.e;return c(e)};
m.prototype.render=function(a,b){var c=this;setTimeout(function(){m.render(c,new r(a),b)},0)};function r(a){this.a=a}r.prototype.get=function(a){var b=this.a;for(a=a.split(".");b&&1<a.length;)b=b[a.shift()];if("function"===typeof b[a[0]])return b[a.shift()]();b=b[a.shift()];return null==b?"":b};r.prototype.trim=function(a){return a.charAt?a.replace(f.l,"").replace(f.m,""):a.map(this.trim)};
r.prototype.scrub=function(a){return("object"===typeof Option?(new Option(a)).innerHTML:a.toString().replace(f.i,"&lt;").replace(f.h,"&gt;")).replace(f.f,"&apos;").replace(f.j,"&quot;")};
r.prototype.parse=function(a){if(!a)return"";var b=this;return a.replace(f.g,function(a,e,d,h,l,p,q){a=b.get(d);var k;if(!a)return"!"===e?b.parse(h):p?b.parse(q):"";if(!e)return p?b.parse(l):b.parse(h);if("!"===e)return"";l=b.a;if("@"===e)if(k="",Array.isArray(a))a.forEach(function(a,c){b.a={n:c,o:c+1,b:a};k+=b.parse(h)});else for(d in a)a.hasOwnProperty(d)&&(b.a={key:d,b:a[d]},k+=b.parse(h));else">"===e&&(Array.isArray(a)?(k="",a.forEach(function(a){b.a=a;k+=b.parse(h)})):(b.a=a,k=b.parse(h)));b.a=
l;return k}).replace(f.b,function(a,e,d){return(a=b.get(d))||0===a&&!f.length.test(d)?"%"===e?b.scrub(a):a:""}).replace(f.macro,function(a,e,d,h,l){a=m.macro(d);h=b.trim(h.split(",")).map(function(a){return f.k.test(a)?a.slice(1,-1):b.get(a)});try{return a.apply(b,h)}catch(p){}return b.parse(l||"")})};this.t=m;var u=u||{};"object"===typeof u.exports&&(u.exports=m);}).call(this);
